"0","chor_brks <- ceiling(classInt::classIntervals(cases_sf$rate_10k, n = 5, style = ""jenks"")$brk)"
"0","chor_pal <- colorBin(RColorBrewer::brewer.pal(5, ""BuPu""), domain = cases_sf$rate_10k, bins = chor_brks)"
"0","leaflet(cases_sf, width = ""100%"", height = 500, "
"0","        options = leafletOptions(zoomSnap = 0.25, zoomDelta = 0.5, scrollWheelZoom = FALSE)) %>%"
"0","  setMaxBounds(bbox[1], bbox[2], bbox[3], bbox[4]) %>%"
"0","  addProviderTiles(providers$CartoDB.Positron) %>%"
"0","  addPolygons(color = ""#333333"", weight = 0.6, fillOpacity = 0.8, "
"0","              fillColor = ~chor_pal(rate_10k),"
"0","              label = ~str_glue(""{name}: {rate_10k} per 10k ({cases} cases)""),"
"0","              labelOptions = labelOptions(className = ""tooltip"", direction = ""top"", offset = c(0, -20)),"
"0","              highlightOptions = highlightOptions(fillOpacity = 1, bringToFront = TRUE, weight = 2)) %>%"
"0","  addLegend(""bottomright"", pal = chor_pal, values = ~rate_10k, opacity = 0.9, title = ""Rate per 10k"")"
